<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Goat</title>

<style>
* { margin:0; padding:0; box-sizing:border-box; }

html, body {
  width:100%;
  height:100%;
  background:black;
  overflow:hidden;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Arial, sans-serif;
}

/* CENTER VIDEO */
#centerVideo {
  width:70vw;
  max-width:900px;
  border-radius:12px;
  z-index:5;
}

/* SIDE CONTAINERS */
.flashColumn {
  position:fixed;
  top:50%;
  transform:translateY(-50%);
  width:260px;
  height:80vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  gap:20px;
  pointer-events:none;
  z-index:3;
}

#flashLeft { left:10px; }
#flashRight { right:10px; }

/* FLASH IMAGE */
.flashImg {
  width:100%;
  border-radius:10px;
  opacity:0;
  animation:fadeFlash 2s ease-in-out forwards;
  box-shadow:0 0 30px rgba(255,255,255,0.3);
}

@keyframes fadeFlash {
  0%   { opacity:0; transform:scale(0.9); }
  20%  { opacity:1; transform:scale(1); }
  80%  { opacity:1; }
  100% { opacity:0; transform:scale(1.05); }
}

/* START OVERLAY */
#startOverlay {
  position:fixed;
  inset:0;
  background:black;
  color:white;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:1.4rem;
  cursor:pointer;
  z-index:1000;
}
</style>
</head>

<body>

<div id="flashLeft" class="flashColumn"></div>
<div id="flashRight" class="flashColumn"></div>

<video id="centerVideo" autoplay loop muted playsinline>
  <source src="music/video.mp4" type="video/mp4">
</video>

<audio id="bgAudio" loop muted></audio>

<div id="startOverlay">Click to accept the invitation</div>

<script>
const overlay = document.getElementById("startOverlay");
const audio = document.getElementById("bgAudio");

const flashLeft = document.getElementById("flashLeft");
const flashRight = document.getElementById("flashRight");

/* MUSIC */
const songs = [
  "music/music.mp3",
  "music/music2.mp3",
  "music/music3.mp3",
  "music/music4.mp3",
  "music/music5.mp3"
];

/* FLASH IMAGE LIST â€” ORDERED, NO RANDOM */
const flashImages = [
  "music/flash1.jpg",
  "music/flash2.jpg",
  "music/flash3.jpg",
  "music/flash4.jpg",
  "music/flash5.jpg",
  "music/flash6.jpg",
  "music/flash7.jpg",
  "music/flash8.jpg",
  "music/flash9.jpg",
  "music/flash10.jpg",
  "music/flash11.jpg",
  "music/flash12.jpg",
  "music/flash13.jpg"
];

let flashIndex = 0;

/* START */
overlay.onclick = () => {
  audio.src = songs[Math.floor(Math.random()*songs.length)];
  audio.muted = false;
  audio.play().catch(()=>{});
  overlay.style.display = "none";
  flashLoop();
};

/* SHOW FLASH IMAGE */
function showFlash() {
  const img = document.createElement("img");
  img.className = "flashImg";
  img.src = flashImages[flashIndex];

  /* alternate sides */
  const column = flashIndex % 2 === 0 ? flashLeft : flashRight;
  column.appendChild(img);

  setTimeout(() => img.remove(), 2000);

  flashIndex++;
  if (flashIndex >= flashImages.length) {
    flashIndex = 0; // restart AFTER full cycle
  }
}

/* LOOP */
function flashLoop() {
  showFlash();
  setTimeout(flashLoop, 2200); // 2s visible + buffer
}
</script>

</body>
</html>
